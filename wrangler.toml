name = "cloudflare-app"
main = "src/server.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Enable Durable Objects
[durable_objects]
bindings = [
  { name = "StoryAgent", class_name = "StoryAgent" }
]

# Enable Workers AI
[ai]
binding = "AI"

# Static Assets
[assets]
directory = "./public"
binding = "ASSETS"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["StoryAgent"]

[observability]
enabled = true
head_sampling_rate = 1 # 100% sampling for debugging (0-1 range usually, but user snippet used different format, sticking to standard if possible or user provided structure)

[observability.logs]
enabled = true
invocation_logs = true
